{% extends "base.html" %}

{% block title %}Community - AgriGuru{% endblock %}

{% block content %}
<div class="container py-4 d-flex justify-content-center">
    <div class="col-lg-10">
    <!-- Header -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="bg-gradient-info text-white rounded-3 p-4">
                <h2 class="fw-bold mb-2">Farmer Community</h2>
                <p class="mb-0 text-white">Connect, share, and learn from fellow farmers in your region and beyond.</p>
            </div>
        </div>
    </div>

    <!-- Community Stats -->
    <div class="row mb-4">
        <div class="col-md-3 mb-3">
            <div class="card text-center">
                <div class="card-body">
                    <i class="fas fa-users text-primary fa-2x mb-2"></i>
                    <h4 class="fw-bold">1,247</h4>
                    <small class="text-muted">Active Farmers</small>
                </div>
            </div>
        </div>
        <div class="col-md-3 mb-3">
            <div class="card text-center">
                <div class="card-body">
                    <i class="fas fa-comments text-success fa-2x mb-2"></i>
                    <h4 class="fw-bold">3,891</h4>
                    <small class="text-muted">Discussions</small>
                </div>
            </div>
        </div>
        <div class="col-md-3 mb-3">
            <div class="card text-center">
                <div class="card-body">
                    <i class="fas fa-lightbulb text-warning fa-2x mb-2"></i>
                    <h4 class="fw-bold">567</h4>
                    <small class="text-muted">Tips Shared</small>
                </div>
            </div>
        </div>
        <div class="col-md-3 mb-3">
            <div class="card text-center">
                <div class="card-body">
                    <i class="fas fa-trophy text-danger fa-2x mb-2"></i>
                    <h4 class="fw-bold">89</h4>
                    <small class="text-muted">Success Stories</small>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <!-- Main Content -->
        <div class="col-lg-8">
            <!-- Create Post - Tweet-like Dialog -->
            {% if current_user.is_authenticated %}
            <div class="tweet-composer mb-4">
                <div class="composer-header">
                    <div class="user-avatar">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="composer-content">
                        <form id="postForm">
                            <div class="composer-input">
                                <textarea 
                                    id="postText" 
                                    class="form-control tweet-textarea" 
                                    placeholder="What's happening in your farm today?" 
                                    rows="3"
                                    maxlength="280"></textarea>
                                <div class="character-count">
                                    <span id="charCount">280</span> characters remaining
                                </div>
                            </div>
                            
                            <!-- Tags Input -->
                            <div class="tags-section mt-3">
                                <div class="tags-input-container">
                                    <input 
                                        type="text" 
                                        id="tagInput" 
                                        class="form-control tags-input" 
                                        placeholder="Add tags (e.g., #rice #irrigation #organic)"
                                        autocomplete="off">
                                    <div class="tags-suggestions" id="tagsSuggestions"></div>
                                </div>
                                <div class="selected-tags" id="selectedTags"></div>
                            </div>
                            
                            <!-- Location and Category -->
                            <div class="composer-options mt-3">
                                <div class="row">
                                    <div class="col-md-6">
                                        <select class="form-select category-select">
                                            <option value="">Select Category</option>
                                            <option value="crop-management">üåæ Crop Management</option>
                                            <option value="pest-control">üêõ Pest Control</option>
                                            <option value="weather">üå§Ô∏è Weather Updates</option>
                                            <option value="market">üí∞ Market Prices</option>
                                            <option value="success">üèÜ Success Stories</option>
                                            <option value="equipment">üöú Equipment & Tools</option>
                                            <option value="organic">üå± Organic Farming</option>
                                        </select>
                                    </div>
                                    <div class="col-md-6">
                                        <input type="text" class="form-control location-input" placeholder="üìç Add location (optional)">
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Action Buttons -->
                            <div class="composer-actions mt-3">
                                <div class="action-buttons">
                                    <button type="button" class="action-btn" title="Add Photo">
                                        <i class="fas fa-image"></i>
                                    </button>
                                    <button type="button" class="action-btn" title="Add Poll">
                                        <i class="fas fa-poll"></i>
                                    </button>
                                    <button type="button" class="action-btn" title="Add Location">
                                        <i class="fas fa-map-marker-alt"></i>
                                    </button>
                                    <button type="button" class="action-btn" title="Schedule Post">
                                        <i class="fas fa-clock"></i>
                                    </button>
                                </div>
                                <button type="submit" class="btn btn-primary post-btn" disabled>
                                    <i class="fas fa-paper-plane me-2"></i>Share
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            {% endif %}

            <!-- Community Posts -->
            <div class="posts-container">
                <!-- Sample Post 1 -->
                <div class="card mb-4">
                    <div class="card-body">
                        <div class="d-flex align-items-center mb-3">
                            <div class="avatar bg-success text-white rounded-circle d-flex align-items-center justify-content-center me-3" style="width: 50px; height: 50px;">
                                <i class="fas fa-user"></i>
                            </div>
                            <div>
                                <h6 class="mb-0 fw-bold">Ramesh Kumar</h6>
                                <small class="text-muted">2 hours ago ‚Ä¢ Crop Management</small>
                            </div>
                        </div>
                        <h5 class="card-title">Successfully increased rice yield by 25% this season!</h5>
                        <p class="card-text">I implemented the crop rotation technique suggested in AgriGuru and used the recommended fertilizer schedule. The results exceeded my expectations. Happy to share my experience with fellow farmers.</p>
                        <div class="d-flex align-items-center gap-3">
                            <button class="btn btn-outline-primary btn-sm">
                                <i class="fas fa-thumbs-up me-1"></i>Like (23)
                            </button>
                            <button class="btn btn-outline-secondary btn-sm">
                                <i class="fas fa-comment me-1"></i>Comment (8)
                            </button>
                            <button class="btn btn-outline-success btn-sm">
                                <i class="fas fa-share me-1"></i>Share
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Sample Post 2 -->
                <div class="card mb-4">
                    <div class="card-body">
                        <div class="d-flex align-items-center mb-3">
                            <div class="avatar bg-info text-white rounded-circle d-flex align-items-center justify-content-center me-3" style="width: 50px; height: 50px;">
                                <i class="fas fa-user"></i>
                            </div>
                            <div>
                                <h6 class="mb-0 fw-bold">Priya Sharma</h6>
                                <small class="text-muted">5 hours ago ‚Ä¢ Weather Updates</small>
                            </div>
                        </div>
                        <h5 class="card-title">Heavy rainfall warning for next week</h5>
                        <p class="card-text">Meteorological department has issued a heavy rainfall warning for our region. Fellow farmers should prepare for drainage and protect standing crops. Those planning to harvest should consider advancing their schedule.</p>
                        <div class="d-flex align-items-center gap-3">
                            <button class="btn btn-outline-primary btn-sm">
                                <i class="fas fa-thumbs-up me-1"></i>Like (45)
                            </button>
                            <button class="btn btn-outline-secondary btn-sm">
                                <i class="fas fa-comment me-1"></i>Comment (12)
                            </button>
                            <button class="btn btn-outline-success btn-sm">
                                <i class="fas fa-share me-1"></i>Share
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Sample Post 3 -->
                <div class="card mb-4">
                    <div class="card-body">
                        <div class="d-flex align-items-center mb-3">
                            <div class="avatar bg-warning text-white rounded-circle d-flex align-items-center justify-content-center me-3" style="width: 50px; height: 50px;">
                                <i class="fas fa-user"></i>
                            </div>
                            <div>
                                <h6 class="mb-0 fw-bold">Suresh Patel</h6>
                                <small class="text-muted">1 day ago ‚Ä¢ Market Prices</small>
                            </div>
                        </div>
                        <h5 class="card-title">Cotton prices rising in local market</h5>
                        <p class="card-text">Observed a 12% increase in cotton prices at the local mandi today. Good time for those who have stored their harvest. Market demand seems to be picking up significantly.</p>
                        <div class="d-flex align-items-center gap-3">
                            <button class="btn btn-outline-primary btn-sm">
                                <i class="fas fa-thumbs-up me-1"></i>Like (67)
                            </button>
                            <button class="btn btn-outline-secondary btn-sm">
                                <i class="fas fa-comment me-1"></i>Comment (15)
                            </button>
                            <button class="btn btn-outline-success btn-sm">
                                <i class="fas fa-share me-1"></i>Share
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Sidebar -->
        <div class="col-lg-4">
            <!-- Popular Topics -->
            <div class="card mb-4">
                <div class="card-header">
                    <h5 class="mb-0"><i class="fas fa-fire me-2"></i>Trending Topics</h5>
                </div>
                <div class="card-body">
                    <div class="list-group list-group-flush">
                        <a href="#" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                            Organic Farming Tips
                            <span class="badge bg-primary rounded-pill">24</span>
                        </a>
                        <a href="#" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                            Monsoon Preparation
                            <span class="badge bg-primary rounded-pill">18</span>
                        </a>
                        <a href="#" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                            Drip Irrigation Systems
                            <span class="badge bg-primary rounded-pill">15</span>
                        </a>
                        <a href="#" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                            Pest Management
                            <span class="badge bg-primary rounded-pill">12</span>
                        </a>
                        <a href="#" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                            Market Analysis
                            <span class="badge bg-primary rounded-pill">9</span>
                        </a>
                    </div>
                </div>
            </div>

            <!-- Featured Farmers -->
            <div class="card mb-4">
                <div class="card-header">
                    <h5 class="mb-0"><i class="fas fa-star me-2"></i>Featured Farmers</h5>
                </div>
                <div class="card-body">
                    <div class="d-flex align-items-center mb-3">
                        <div class="avatar bg-success text-white rounded-circle d-flex align-items-center justify-content-center me-3" style="width: 40px; height: 40px;">
                            <i class="fas fa-user"></i>
                        </div>
                        <div>
                            <h6 class="mb-0">Raj Singh</h6>
                            <small class="text-muted">Expert in organic farming</small>
                        </div>
                    </div>
                    <div class="d-flex align-items-center mb-3">
                        <div class="avatar bg-info text-white rounded-circle d-flex align-items-center justify-content-center me-3" style="width: 40px; height: 40px;">
                            <i class="fas fa-user"></i>
                        </div>
                        <div>
                            <h6 class="mb-0">Meera Devi</h6>
                            <small class="text-muted">Innovative irrigation methods</small>
                        </div>
                    </div>
                    <div class="d-flex align-items-center">
                        <div class="avatar bg-warning text-white rounded-circle d-flex align-items-center justify-content-center me-3" style="width: 40px; height: 40px;">
                            <i class="fas fa-user"></i>
                        </div>
                        <div>
                            <h6 class="mb-0">Kumar Das</h6>
                            <small class="text-muted">Market price analyst</small>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Quick Links -->
            <div class="card">
                <div class="card-header">
                    <h5 class="mb-0"><i class="fas fa-link me-2"></i>Quick Links</h5>
                </div>
                <div class="card-body">
                    <div class="d-grid gap-2">
                        <a href="#" class="btn btn-outline-primary btn-sm">
                            <i class="fas fa-question-circle me-2"></i>Ask Expert
                        </a>
                        <a href="#" class="btn btn-outline-success btn-sm">
                            <i class="fas fa-calendar me-2"></i>Farm Events
                        </a>
                        <a href="#" class="btn btn-outline-info btn-sm">
                            <i class="fas fa-book me-2"></i>Knowledge Base
                        </a>
                        <a href="#" class="btn btn-outline-warning btn-sm">
                            <i class="fas fa-handshake me-2"></i>Find Partners
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    </div>
</div>

<script src="{{ url_for('static', filename='js/community.js') }}"></script>
{% endblock %}
